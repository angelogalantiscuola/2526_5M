{% extends 'base.html' %}

{% block content %}
<h1>Archivio Post</h1>

<form method="post">
    <label for="year">Anno:</label>
    <select name="year" id="year">
        <option value="">-- Seleziona --</option>
        <option value="2024" {% if selected_year==2024 %}selected{% endif %}>2024</option>
        <option value="2025" {% if selected_year==2025 %}selected{% endif %}>2025</option>
        <option value="2026" {% if selected_year==2026 %}selected{% endif %}>2026</option>
    </select>

    <label for="month">Mese:</label>
    <select name="month" id="month">
        <option value="">-- Seleziona --</option>
        <option value="1" {% if selected_month==1 %}selected{% endif %}>Gennaio</option>
        <option value="2" {% if selected_month==2 %}selected{% endif %}>Febbraio</option>
        <option value="3" {% if selected_month==3 %}selected{% endif %}>Marzo</option>
        <option value="4" {% if selected_month==4 %}selected{% endif %}>Aprile</option>
        <option value="5" {% if selected_month==5 %}selected{% endif %}>Maggio</option>
        <option value="6" {% if selected_month==6 %}selected{% endif %}>Giugno</option>
        <option value="7" {% if selected_month==7 %}selected{% endif %}>Luglio</option>
        <option value="8" {% if selected_month==8 %}selected{% endif %}>Agosto</option>
        <option value="9" {% if selected_month==9 %}selected{% endif %}>Settembre</option>
        <option value="10" {% if selected_month==10 %}selected{% endif %}>Ottobre</option>
        <option value="11" {% if selected_month==11 %}selected{% endif %}>Novembre</option>
        <option value="12" {% if selected_month==12 %}selected{% endif %}>Dicembre</option>
    </select>

    <button type="submit">Cerca</button>
</form>

<hr>

{% if selected_year and selected_month %}
<h2>Risultati per {{ '%02d' % selected_month }}/{{ selected_year }}</h2>

{% if posts %}
{% for post in posts %}
<article>
    <h3>{{ post['title'] }}</h3>
    <small>Di <strong>{{ post['username'] }}</strong> il {{ post['created'].strftime('%Y-%m-%d') }}</small>
    <p>{{ post['body'][:100] }}...</p>
</article>
<hr>
{% endfor %}
{% else %}
<p>Nessun post trovato per questo periodo.</p>
{% endif %}
{% endif %}

<a href="{{ url_for('main.index') }}">‚Üê Torna alla home</a>
{% endblock %}